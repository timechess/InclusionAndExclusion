\title{InclusionAndExclusion}


\home{https://timechess.github.io/InclusionAndExclusion}
\github{https://github.com/timechess/InclusionAndExclusion}
\dochome{https://timechess.github.io/InclusionAndExclusion/doc}

% \home{localhost:8000}
% \dochome{localhost:8000/doc}

\maketitle


\tableofcontents

\nocite{*} % Delete this line if you have citations.

\section{Introduction}


\section{FinInter}

\begin{definition}\label{List.FinInter}
  \leanok
  \lean{List.FinInter}
  Define the intersection of a list of finite sets indexed by \verb|β|, where each set is given by a function \verb|A : β → Finset α|.
\end{definition}

\begin{lemma}\label{List.eq_FinInter}
  \lean{List.eq_FinInter}
  \uses{List.FinInter}
  Prove that an element is in the intersection of a list of finite sets if and only if it is in each of the sets.
\end{lemma}

\begin{definition}\label{Multiset.FinInter}
  \lean{Multiset.FinInter}
  \uses{List.FinInter,List.eq_FinInter}
  Define the intersection of a multiset of finite sets indexed by \verb|β|, where each set is given by a function \verb|A : β → Finset α|.
\end{definition}

\begin{lemma}\label{Multiset.eq_FinInter}
  \lean{Multiset.eq_FinInter}
  \uses{List.FinInter,List.eq_FinInter,Multiset.FinInter}
  Prove that an element is in the intersection of a multiset of finite sets if and only if it is in each of the sets.
\end{lemma}

\begin{definition}\label{FinInter₀}
  \lean{FinInter₀}
  \uses{Multiset.FinInter}
  Define the intersection of all finite sets indexed by \verb|β|, where each set is given by a function \verb|A : β → Finset α|.
\end{definition}

\begin{lemma}\label{eq_FinInter₀}
  \lean{eq_FinInter₀}
  \uses{Multiset.eq_FinInter,FinInter₀}
  Prove that the intersection of all finite sets indexed by \verb|β| is equal to the intersection of their corresponding sets in \verb|Set α|.
\end{lemma}

\section{FinUnion}

\begin{definition}\label{List.FinUnion}
  \leanok
  \lean{List.FinUnion}
  Define the union of a list of finite sets indexed by \verb|β|, where each set is given by a function \verb|A : β → Finset α|.
\end{definition}

\begin{lemma}\label{List.eq_FinUnion}
  \lean{List.eq_FinUnion}
  \uses{List.FinUnion}
  Prove that an element is in the union of a list of finite sets if and only if it is in at least one of the sets.
\end{lemma}

\begin{definition}\label{Multiset.FinUnion}
  \lean{Multiset.FinUnion}
  \uses{List.FinUnion,List.eq_FinUnion}
  Define the union of a multiset of finite sets indexed by \verb|β|, where each set is given by a function \verb|A : β → Finset α|.
\end{definition}

\begin{lemma}\label{Multiset.eq_FinUnion}
  \lean{Multiset.eq_FinUnion}
  \uses{List.FinUnion,List.eq_FinUnion,Multiset.FinUnion}
  Prove that an element is in the union of a multiset of finite sets if and only if it is in at least one of the sets.
\end{lemma}

\begin{definition}\label{FinUnion₀}
  \lean{FinUnion₀}
  \uses{Multiset.FinUnion}
  Define the union of all finite sets indexed by \verb|β|, where each set is given by a function \verb|A : β → Finset α|.
\end{definition}

\begin{lemma}\label{eq_FinUnion₀}
  \lean{eq_FinUnion₀}
  \uses{Multiset.eq_FinUnion,FinUnion₀}
  Prove that the union of all finite sets indexed by \verb|β| is equal to the union of their corresponding sets in \verb|Set α|.
\end{lemma}

\section{ToInt}

\begin{definition}\label{toInt}
  \leanok
  \lean{toInt}
  Assign a value to a proposition. If the proposition holds, assign a value of 1; otherwise, assign a value of 0.
\end{definition}

\begin{lemma}\label{toInt_and}
  \lean{toInt_and}
  \uses{toInt}
  \leanok
  The value of both propositions P and Q holding is equal to the value of P times the value of Q.
\end{lemma}

\begin{lemma}\label{toInt_not}
  \lean{toInt_not}
  \uses{toInt}
  \leanok
  The value of the negation of a proposition P is equal to 1 minus the value of P.
\end{lemma}

\begin{definition}\label{char_fun}
  \leanok
  \lean{char_fun}
  \uses{toInt}
  Define a characteristic function that returns 1 if \verb|x| is in the finite set \verb|A|, and 0 otherwise.
\end{definition}

\begin{lemma}\label{char_fun_inter}
  \lean{char_fun_inter}
  \uses{toInt,toInt_and,char_fun}
  The characteristic function of the intersection of two finite sets \verb|A| and \verb|B| is equal to the product of their characteristic functions.
\end{lemma}

\begin{lemma}\label{char_fun_union}
  \lean{char_fun_union}
  \uses{toInt,toInt_and,toInt_not,char_fun}
  The characteristic function of the union of two finite sets \verb|A| and \verb|B| is equal to 1 minus the product of 1 minus their characteristic functions.
\end{lemma}
\section{Auxiliary}

\begin{definition}\label{Finset.powerset₀}
  \leanok
  \lean{Finset.powerset₀}
  Define the set of all nonempty subsets of a given finite set \verb|A|.
\end{definition}

\begin{lemma}\label{card_eq}
  \lean{card_eq}
  If a finite set \verb|A| is equal to a set \verb|B| in the sense of set theory, then they have the same number of elements.
\end{lemma}

\begin{lemma}\label{mul_expand₃}
  \lean{mul_expand₃}
  Formalize the polynomial expansion of the product \(\prod_{i=0}^{n-1} (1 - g(i))\).
\end{lemma}

\begin{lemma}\label{mul_expand₂}
  \lean{mul_expand₂}
  \uses{Finset.powerset₀,mul_expand₃}
  Formalize the polynomial expansion of \(1 - \prod_{i=0}^{n-1} (1 - g(i))\).
\end{lemma}

\begin{lemma}\label{mul_expand₁}
  \lean{mul_expand₁}
  \uses{Finset.powerset₀,mul_expand₂}
  Formalize the polynomial expansion of \(1 - \prod_{i=0}^{n-1} (1 - g(i))\) in the context of finite sets of natural numbers up to \verb|n|.
\end{lemma}


\section{MainTheorem}

\begin{lemma}\label{card_eq_sum_char_fun}
  \lean{card_eq_sum_char_fun}
  \uses{toInt,char_fun,card_eq}
  The cardinality of a subset \verb|B| of \verb|A| is equal to the sum of the characteristic function of \verb|B| over \verb|A|.
\end{lemma}

\begin{lemma}\label{card_eq_FinInter}
  \lean{card_eq_FinInter}
  \uses{FinInter₀,eq_FinInter₀,card_eq}
  The cardinality of the intersection of a family of finite sets indexed by \verb|β| is equal to the cardinality of their intersection in \verb|Finset| form.
\end{lemma}

\begin{lemma}\label{card_eq_FinUnion}
  \lean{card_eq_FinUnion}
  \uses{card_eq,FinUnion₀,eq_FinUnion₀}
  The cardinality of the union of a family of finite sets indexed by \verb|β| is equal to the cardinality of their union in \verb|Finset| form.
\end{lemma}

\begin{lemma}\label{char_fun_FinInter}
  \lean{char_fun_FinInter}
  \uses{FinInter₀,eq_FinInter₀,toInt,char_fun}
  The characteristic function of the intersection of a family of finite sets indexed by \verb|β| is equal to the product of their characteristic functions.
\end{lemma}

\begin{lemma}\label{char_fun_FinUnion}
  \lean{char_fun_FinUnion}
  \uses{FinUnion₀,eq_FinUnion₀,toInt,char_fun}
  The characteristic function of the union of a family of finite sets indexed by \verb|β| is equal to 1 minus the product of 1 minus their characteristic functions.
\end{lemma}

\begin{lemma}\label{mul_expand₀}
  \lean{mul_expand₀}
  \uses{Finset.powerset₀,mul_expand₁}
  The polynomial expansion of \(1 - \prod_{i=0}^{n-1} (1 - g(i))\).
\end{lemma}

\begin{theorem}\label{Principle_of_Inclusion_Exclusion}
  \lean{Principle_of_Inclusion_Exclusion}
  \uses{FinInter₀,FinUnion₀,eq_FinInter₀,eq_FinUnion₀,Finset.powerset₀,char_fun,card_eq_sum_char_fun,char_fun_FinInter,char_fun_FinUnion,card_eq,card_eq_FinInter,card_eq_FinUnion,mul_expand₀}
  The principle of inclusion-exclusion for a finite union of finite sets.
\end{theorem}

